@import '~@jetbrains/ring-ui/components/global/global';

.activities-widget {
  color: var(--ring-text-color);

  &__issue-filter {
    margin-bottom: 3 * $ring-unit;

    &__query {
      width: 100%;

      vertical-align: top;
    }
  }

  &__user-selector {
    margin-bottom: 3 * $ring-unit;

    &__title {
      color: var(--ring-secondary-color);

      font-size: var(--ring-font-size-smaller);
    }

    &__form-select {
      width: 100%;

      vertical-align: top;
    }
  }

  &__category-selector {
    margin-bottom: 2 * $ring-unit;

    &__title {
      padding: 0 0 $ring-unit/2 0;

      font-size: var(--ring-font-size);
      font-weight: bold;
    }

    &__info {
      padding: 0 0 $ring-unit 0;

      color: var(--ring-secondary-color);

      font-size: var(--ring-font-size-smaller);
    }

    [data-test|=ring-table-header-cell]:first-child {
      padding-left: $ring-unit !important;
    }

    [data-test|=ring-table-cell]:first-child {
      padding-left: $ring-unit !important;
    }
  }

  $left-indent: $ring-unit * 4;
  $right-indent: $ring-unit * 2;
  $small-indent: $ring-unit / 2;

  &__load-more {
    margin: 4px 0;
    padding: 4px 0;

    text-align: center;

    border: 1px dashed var(--ring-borders-color);
    border-radius: 3px;

    font-size: var(--ring-font-size-smaller);

    &:hover {
      border-color: var(--ring-pale-control-color);
    }
  }

  &__issue {
    display: block;
    overflow: hidden;

    white-space: nowrap;
    text-overflow: ellipsis;

    &__id {
      white-space: nowrap;

      color: var(--ring-text-color);

      font-size: 13px;

      &_resolved {
        text-decoration: line-through;

        color: var(--ring-secondary-color);
      }
    }

    &__summary {
      margin-left: $small-indent;

      &_resolved {
        color: var(--ring-secondary-color);
      }
    }
  }

  &__activity {
    padding-bottom: 3 * $ring-unit;

    font-size: 14px;

    &_new {
      background: var(--ring-selected-background-color);
    }

    &__issue {
      margin: 0 $right-indent 0 $left-indent;
    }

    &__action {
      display: flex;

      width: 100%;

      &__author {
        &__avatar {
          position: relative;
          bottom: -4px;

          float: left;

          width: $left-indent;

          &__group {
            position: absolute;
            right: 4px;
            bottom: -1px;

            width: 14px;
            height: 14px;

            border-radius: 3px;
          }
        }

        &__info {
          margin: 0 0 0 $left-indent;
          padding: $ring-unit 0 $ring-unit 0;

          &__name {
            width: $left-indent;
          }
        }
      }

      &__title {
        margin-left: $ring-unit;
        padding: $ring-unit 0 $ring-unit 0;

        color: var(--ring-secondary-color);
      }

      &__time {
        margin-left: $small-indent;
        padding: $ring-unit 0 $ring-unit 0;

        color: var(--ring-secondary-color);
      }

      &__stream-link {
        flex: 20;

        width: auto;

        padding: $ring-unit 0 $ring-unit 0;

        &__icon {
          float: right;

          color: var(--ring-icon-color);
        }
      }
    }

    &__change {
      margin: 0 $right-indent 0 $left-indent;

      &__field-name {
        margin-right: $ring-unit;

        white-space: nowrap;
      }

      &__added {
        margin-right: $small-indent;

        color: var(--ring-icon-success-color);
      }

      &__removed {
        text-decoration: line-through;
      }
    }

    &__text {
      display: flex;

      &__field-name {
        margin-right: $ring-unit;

        white-space: nowrap;
      }

      &__field-details {
        margin-left: $ring-unit;
      }

      &__value {
        flex: 1;

        .diff-ins {
          text-decoration: none;

          background-color: #e6ffe6;
        }

        .diff-del {
          text-decoration: none;

          background-color: #ffe6e6;
        }
      }
    }

    &__link {
      display: flex;

      width: 100%;

      &__field-name {
        margin-right: $ring-unit;

        white-space: nowrap;
      }

      &__value {
        flex: 1;

        max-width: 400px;

        &__added {
          //TODO
        }

        &__removed {
          //TODO
        }
      }
    }

    &__work_item {
      &__period_minutes {
        color: #999;

        font-weight: 700;
      }

      &__period_hours {
        font-weight: 700;
      }

      &__container {
        display: flex;

        width: 100%;
      }

      &__cell {
        width: 11*$ring-unit;

        padding: 0 4px 0 4px;

        text-align: left;

        &_separator {
          width: 5px;

          padding: 0 4px 0 4px;

          text-align: center;

          color: #cfdbe5;
        }

        &_date {
          padding: 0 4px 0 0;

          white-space: nowrap;
        }

        &_duration {
          text-align: right;

          white-space: nowrap;

          font-size: 14px;
          font-weight: 700;
        }

        &_type {
          overflow: hidden;

          width: 112px;
          min-width: 2*$ring-unit;

          text-overflow: ellipsis;
        }

        &_text {
          flex: 2;

          width: auto;

          padding: 0 0 0 4px;

          hyphens: auto;
        }
      }
    }

    &__vcs_change_link {
      float: right;

      margin-top: -24px;
    }
  }
}
